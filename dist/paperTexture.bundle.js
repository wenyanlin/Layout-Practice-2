Vue.component("paper",{template:"#paper-texture-template",data:()=>({isOpen:!1}),props:["paper_data","paper_option","paper_index"],computed:{allWeight(){const t=this.paper_option.map((t=>t.w)).flat();return[...new Set(t)].join(", ")},popupMarginLeft(){return`calc((-100% - 20px) * ${this.paper_index%5})`},allOptions(){return this.paper_option.map((t=>t.id))}},methods:{toggleClass(t,e){t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)},isPopup(t){const e=t.currentTarget;document.querySelectorAll(".paper-texture_item.current").forEach((function(t){t!==e&&t.classList.remove("current")}));const r=e.nextElementSibling;document.querySelectorAll(".paper-texture_item_popup.active").forEach((function(t){t!==r&&t.classList.remove("active")})),this.toggleClass(e,"current"),this.toggleClass(r,"active")},noPopup(t){const e=t.currentTarget;this.toggleClass(e.closest(".paper-texture_item_popup"),"active"),this.toggleClass(t.currentTarget.parentNode.parentNode.querySelector(".current"),"current")},getOptionName(t){return this.paper_data.variants.find((e=>e.id===t)).variant_name},getOptionIntro(t){return this.paper_data.variants.find((e=>e.id===t)).introduction},getOptionQuality(t,e){var r=this.paper_data.variants.find((e=>e.id===t));return r=r.quality.find((t=>t.weight===e)),r?.thickness?r.thickness+"±1條":"-"}}}),new Vue({el:"#paper-texture",data:()=>({productData:null,paperData:null}),methods:{switchProductContent:t=>new Promise(((e,r)=>{null!==t&&t.length?$.ajax({url:"/Product/allProduct.json",dataType:"json",success:function(a){a.forEach((r=>{r.products.forEach((a=>{a.id&&a.id.toLowerCase()===t&&e(`/Product/${r.id}/${a.id}/`)}))})),r(new Error("Product not found"))}}):r(new Error("Product not found"))})),getPaperDataById(t){return this.paperData.find((e=>e.id===t))}},mounted:function(){const t=new URLSearchParams(window.location.search);this.switchProductContent(t.get("product").toLowerCase()).then((t=>{urlLocation=t;var e=this;$.ajax({url:urlLocation+"intro.json",dataType:"json",success:function(t){e.productData=t}}),$.ajax({url:"/Product/paper.json",dataType:"json",success:function(t){e.paperData=t}})})),document.addEventListener("click",this.handleDocumentClick)},beforeDestroy(){document.removeEventListener("click",this.handleDocumentClick)}});